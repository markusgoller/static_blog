<html>

<head>
    <title>My super title</title>
    <meta name="tags" content="thats, awesome" />
    <meta name="date" content="2012-07-09 22:28" />
    <meta name="modified" content="2012-07-10 20:14" />
    <meta name="category" content="yeah" />
    <meta name="authors" content="Alexis MÃ©taireau, Conan Doyle" />
    <meta name="summary" content="Short version for index and feeds" />

</head>

<body>
    <div id="markusmap" data='{"lon": 47, "lat": 11, "polygon": "[47.509, -12.08], [47.503, -12.06], [47.511, -12.047]", "marker": "Markus"}' style="width: 100%; height: 400px;"></div>
    <script>
        let wrapper = document.getElementById("markusmap")
        let data = wrapper.attributes['data'].value
        console.log(data)
        data = JSON.parse(data)
        let position = [data.lon, data.lat]
        var mymap = L.map('markusmap').setView(position, 13);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
            attribution: 'Kartendaten &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> Mitwirkende',
        }).addTo(mymap);

        L.marker([51.5, -0.09]).addTo(mymap)
            .bindPopup("<img src='https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.python.org%2F&psig=AOvVaw1KiFpVyOdPufNo7n-xaDwp&ust=1599332620845000&source=images&cd=vfe&ved=0CAIQjRxqFwoTCKClm8CY0OsCFQAAAAAdAAAAABAE'></img>").openPopup();

        L.circle([51.508, -0.11], 500, {
            color: 'red',
            fillColor: '#f03',
            fillOpacity: 0.5
        }).addTo(mymap).bindPopup("I am a circle.");

        L.polygon(data.polygon).addTo(mymap).bindPopup(data.marker);


        var popup = L.popup();

        function onMapClick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent("You clicked the map at " + e.latlng.toString())
                .openOn(mymap);
        }

        mymap.on('click', onMapClick);
    </script>
</body>

</html>